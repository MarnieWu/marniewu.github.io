{"title":"é—­åŒ… Closures","uid":"0e16d47ce0f8c7e02c11662ec70d0b06","slug":"closures","date":"2025-01-16T12:15:31.000Z","updated":"2025-01-21T04:31:42.302Z","comments":true,"path":"api/articles/closures.json","keywords":"","cover":[],"content":"<h2 id=\"What-are-Closures\"><a href=\"#What-are-Closures\" class=\"headerlink\" title=\"What are Closures?\"></a>What are Closures?</h2><p>Rust ä¸­çš„é—­åŒ…æœ¬è´¨æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå®ƒæœ‰ä¸‰ä¸ªç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>å¯ä»¥è¢«å­˜å‚¨åœ¨å˜é‡ä¸­</li>\n<li>å¯ä»¥å½“åšå‚æ•°ä¼ ç»™æŸä¸ªå‡½æ•°</li>\n<li>å¯ä»¥å½“åšæŸä¸ªå‡½æ•°çš„è¿”å›å€¼</li>\n</ul>\n<p>è¿™éƒ½æ˜¯æ™®é€šå‡½æ•°ä¸èƒ½åšåˆ°çš„ï¼Œä¸€ä¼šå„¿æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå¯¹æ¯”çš„ä¾‹å­ï¼Œå…ˆæ¥çœ‹ä¸‹é—­åŒ…çš„è¯­æ³•å’Œä½¿ç”¨ã€‚</p>\n<h2 id=\"Closure-Syntax\"><a href=\"#Closure-Syntax\" class=\"headerlink\" title=\"Closure Syntax\"></a>Closure Syntax</h2><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|parameters| body</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Parametersï¼šå‚æ•°éœ€è¦ç”¨ç«–çº¿åŒ…è£¹ï¼Œå¯ä»¥ä¸ºç©º <code>||</code></li>\n<li>Bodyï¼šé—­åŒ…ä¸»ä½“ï¼Œé»˜è®¤éœ€è¦ç”¨ <code>&#123;&#125;</code> åŒ…è£¹ <code>|...| &#123; ... &#125;</code>ï¼Œå¦‚æœåªæœ‰ä¸€å¥è¡¨è¾¾å¼ï¼ˆexpressionï¼‰ï¼Œå¯ä»¥çœç•¥æ‹¬å· <code>|...| println!(&quot;test&quot;)</code></li>\n</ul>\n<h2 id=\"Examples\"><a href=\"#Examples\" class=\"headerlink\" title=\"Examples\"></a>Examples</h2><h3 id=\"Simple-Closure\"><a href=\"#Simple-Closure\" class=\"headerlink\" title=\"Simple Closure\"></a><strong>Simple Closure</strong></h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">add</span> = |a: <span class=\"type\">i32</span>, b: <span class=\"type\">i32</span>| <span class=\"punctuation\">-&gt;</span> <span class=\"type\">i32</span> &#123; a + b &#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">result</span> = <span class=\"title function_ invoke__\">add</span>(<span class=\"number\">2</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\"><span class=\"built_in\">println!</span>(<span class=\"string\">&quot;The sum is &#123;&#125;.&quot;</span>, result); <span class=\"comment\">// Output: The sum is 5.</span></span><br></pre></td></tr></table></figure>\n\n<p>ç®€å•çš„é—­åŒ…å°±å’Œæ™®é€šå‡½æ•°è¡¨ç°ä¸€è‡´ï¼Œæˆ‘ä»¬å®šä¹‰æ—¶ä¹Ÿå¯ä»¥ä¸å£°æ˜ç±»å‹ï¼ŒæŒ‰ç…§ç¬¬ä¸€ä¸ªè°ƒç”¨çš„é—­åŒ…ä¼šäº§ç”Ÿè‡ªåŠ¨çš„ç±»å‹æ¨æ–­ã€‚</p>\n<h3 id=\"No-Parameters-one-line-body\"><a href=\"#No-Parameters-one-line-body\" class=\"headerlink\" title=\"No Parameters, one line body\"></a>No Parameters, one line body</h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">greet</span> = || <span class=\"built_in\">println!</span>(<span class=\"string\">&quot;Hello, world!&quot;</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">greet</span>(); <span class=\"comment\">// Outputs: Hello, world!</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"Capturing-Variables\"><a href=\"#Capturing-Variables\" class=\"headerlink\" title=\"Capturing Variables\"></a>Capturing Variables</h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">x</span> = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">add_to_x</span> = |y: <span class=\"type\">i32</span>| <span class=\"punctuation\">-&gt;</span> <span class=\"type\">i32</span> &#123; y + x &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">result</span> = <span class=\"title function_ invoke__\">add_to_x</span>(<span class=\"number\">5</span>);</span><br><span class=\"line\"><span class=\"built_in\">println!</span>(<span class=\"string\">&quot;The result of adding 5 to &#123;&#125; is: &#123;&#125;&quot;</span>, x, result); <span class=\"comment\">// Outputs: The result of adding 5 to 10 is: 15</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"Multi-Lines\"><a href=\"#Multi-Lines\" class=\"headerlink\" title=\"Multi Lines\"></a>Multi Lines</h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">squared_sum</span> = |x: <span class=\"type\">i32</span>, y: <span class=\"type\">i32</span>| <span class=\"punctuation\">-&gt;</span> <span class=\"type\">i32</span> &#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">let</span> <span class=\"variable\">sum</span> = x * y;</span><br><span class=\"line\">  \tsum * sum</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">result</span> = <span class=\"title function_ invoke__\">squared_sum</span>(<span class=\"number\">2</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\"><span class=\"built_in\">println!</span>(<span class=\"string\">&quot;Result = &#123;&#125;&quot;</span>, result); <span class=\"comment\">// Outputs: Result = 64</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Compared-to-standard-functions\"><a href=\"#Compared-to-standard-functions\" class=\"headerlink\" title=\"Compared to standard functions\"></a>Compared to standard functions</h2><h3 id=\"Donâ€™t-have-to-sepcify-data-types-of-the-closureâ€™s-arguments\"><a href=\"#Donâ€™t-have-to-sepcify-data-types-of-the-closureâ€™s-arguments\" class=\"headerlink\" title=\"Donâ€™t have to sepcify data types of the closureâ€™s arguments\"></a>Donâ€™t have to sepcify data types of the closureâ€™s arguments</h3><p>å¯ä»¥ä¸å®šä¹‰é—­åŒ…çš„å‚æ•°ç±»å‹ï¼Œå®ƒä¼šæ ¹æ®å®é™…è°ƒç”¨ï¼ˆinvokeï¼‰ä¼ å…¥çš„å‚æ•°ç±»å‹è¿›è¡Œç±»å‹æ¨æ–­ï¼ˆdata type inferingï¼‰ã€‚</p>\n<h4 id=\"As-same-as-the-returning-type-also-can-be-empty-complier-will-infer-the-data-type-through-its-invoking\"><a href=\"#As-same-as-the-returning-type-also-can-be-empty-complier-will-infer-the-data-type-through-its-invoking\" class=\"headerlink\" title=\"As same as, the returning type also can be empty, complier will infer the data type through its invoking.\"></a>As same as, the returning type also can be empty, complier will infer the data type through its invoking.</h4><p>åŒæ ·çš„ï¼Œè¿”å›ç±»å‹ä¹Ÿå¯ä»¥ä¸å®šä¹‰ï¼Œç¼–è¯‘å™¨ä¼šé€šè¿‡å…¶è°ƒç”¨æ¨æ–­æ•°æ®ç±»å‹ã€‚</p>\n<h3 id=\"Capturing-Variables-1\"><a href=\"#Capturing-Variables-1\" class=\"headerlink\" title=\"Capturing Variables\"></a>Capturing Variables</h3><p>é—­åŒ…å’Œå‡½æ•°è¿˜æœ‰ä¸€ä¸ªå¤§å·®å¼‚ â€”â€” é—­åŒ…å¯ä»¥è®¿é—®å…¶æ‰€åœ¨ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚Standard functions can not access the varibales which are defined out of this function.</p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">pub</span> <span class=\"keyword\">fn</span> <span class=\"title function_\">test_closures</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">add</span> = |x: <span class=\"type\">i32</span>, y: <span class=\"type\">i32</span>| x + y;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">number</span> = <span class=\"number\">5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">test_standard_function</span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">println!</span>(<span class=\"string\">&quot;&#123;&#125;&quot;</span>, number); <span class=\"comment\">// âŒ get error</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_ invoke__\">add</span>(number, <span class=\"number\">10</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/../images/closure/image-20250120161822179.png\" alt=\"image-20250120161822179\"></p>\n<p>è€Œé—­åŒ…ä¸åŒäºæ ‡å‡†å‡½æ•°ï¼Œå®ƒæä¾›äº† inheritï¼ˆç»§æ‰¿ï¼‰çš„èƒ½åŠ›ï¼Œåœ¨é—­åŒ…å†…å¯ä»¥è®¿é—®çˆ¶çº§ä½œç”¨åŸŸï¼ˆparent scopeï¼‰ç”¨å†…å®šä¹‰çš„å˜é‡ï¼Œè¿™ä¹Ÿè¢«ç§°ä¸ºå˜é‡æ•è·ï¼ˆcapturing variablesï¼‰ï¼Œæ•è·æœ‰ä¸‰ç§å½¢å¼ï¼š</p>\n<ul>\n<li>å¼•ç”¨æ•è·ï¼ˆé»˜è®¤ï¼‰ï¼šé—­åŒ…å¯¹å˜é‡è¿›è¡Œå€Ÿç”¨</li>\n<li>å¯å˜å¼•ç”¨æ•è·ï¼šé—­åŒ…å¯¹å˜é‡è¿›è¡Œå¯å˜çš„å€Ÿç”¨</li>\n<li>æŒ‰å€¼ï¼šä¸Šä¸¤ç§éƒ½æ˜¯å¯¹å˜é‡çš„å€Ÿç”¨ï¼Œå¦‚æœæƒ³ç›´æ¥æ‹¥æœ‰æ•°æ®çš„æ‰€æœ‰æƒï¼Œéœ€è¦ä½¿ç”¨ <code>move</code> å…³é”®å­—è½¬ç§»æ‰€æœ‰æƒï¼Œæ‰€æœ‰æƒè½¬ç§»åçš„å˜é‡ä¸èƒ½å†åç»­è¢«ä½¿ç”¨</li>\n</ul>\n<h4 id=\"Examples-1\"><a href=\"#Examples-1\" class=\"headerlink\" title=\"Examples\"></a>Examples</h4><h5 id=\"Capturing-By-Referenceï¼ˆDefault\"><a href=\"#Capturing-By-Referenceï¼ˆDefault\" class=\"headerlink\" title=\"Capturing By Referenceï¼ˆDefault)\"></a>Capturing By Referenceï¼ˆDefault)</h5><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">x</span> = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">add_to_x</span> = |y: <span class=\"type\">i32</span>| <span class=\"punctuation\">-&gt;</span> <span class=\"type\">i32</span> &#123; y + x &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">result</span> = <span class=\"title function_ invoke__\">add_to_x</span>(<span class=\"number\">5</span>);</span><br><span class=\"line\"><span class=\"built_in\">println!</span>(<span class=\"string\">&quot;The result of adding 5 to &#123;&#125; is: &#123;&#125;&quot;</span>, x, result); <span class=\"comment\">// Outputs: The result of adding 5 to 10 is: 15</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"Capturing-By-Mutable-Reference\"><a href=\"#Capturing-By-Mutable-Reference\" class=\"headerlink\" title=\"Capturing By Mutable Reference\"></a>Capturing By Mutable Reference</h5><p>å¯å˜å€Ÿç”¨çš„å‰ææ˜¯è¢«å€Ÿç”¨çš„å˜é‡ä¹Ÿå¾—æ˜¯ mutable çš„ï¼Œé—­åŒ…ä¹Ÿå®šä¹‰æˆ mutable</p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"keyword\">mut </span><span class=\"variable\">x</span> = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"keyword\">mut </span><span class=\"variable\">add_to_x</span> = |y: <span class=\"type\">i32</span>| <span class=\"punctuation\">-&gt;</span> <span class=\"type\">i32</span> &#123;</span><br><span class=\"line\">  \tx += <span class=\"number\">5</span>; <span class=\"comment\">// mutation</span></span><br><span class=\"line\">  \tx + y</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">result</span> = <span class=\"title function_ invoke__\">add_to_x</span>(<span class=\"number\">5</span>);</span><br><span class=\"line\"><span class=\"built_in\">println!</span>(<span class=\"string\">&quot;x = &#123;&#125;&quot;</span>, x); <span class=\"comment\">// Outputs: x = 15</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"Capturing-By-Valueï¼ˆmoveï¼‰\"><a href=\"#Capturing-By-Valueï¼ˆmoveï¼‰\" class=\"headerlink\" title=\"Capturing By Valueï¼ˆmoveï¼‰\"></a>Capturing By Valueï¼ˆ<code>move</code>ï¼‰</h5><p>å¯¹äºå®ç°äº† <code>Copy</code> trait çš„æ•°æ®ç±»å‹å˜é‡çš„ç§»åŠ¨å’Œèµ‹å€¼éƒ½ä¸ä¼šå‘ç”Ÿæ‰€æœ‰æƒè½¬ç§»ï¼Œæ˜¯å€¼çš„å¤åˆ¶ã€‚æ‰€ä»¥æµ‹è¯• move éœ€è¦ä½¿ç”¨æ²¡æœ‰å®ç° <code>Copy</code> trait çš„æ•°æ®ç±»å‹</p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">x</span> = <span class=\"type\">String</span>::<span class=\"title function_ invoke__\">from</span>(<span class=\"string\">&quot;Test&quot;</span>); <span class=\"comment\">// no implements Copy trait</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">foo</span> = <span class=\"keyword\">move</span> || <span class=\"built_in\">println!</span>(<span class=\"string\">&quot;&#123;&#125; is moved&quot;</span>, x);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">foo</span>();</span><br><span class=\"line\"><span class=\"built_in\">println!</span>(<span class=\"string\">&quot;&#123;&#125;&quot;</span>, x);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/../images/closure/image-20250117023543133.png\" alt=\"image-20250117023543133\"></p>\n<h3 id=\"Types-of-the-closures\"><a href=\"#Types-of-the-closures\" class=\"headerlink\" title=\"Types of the closures\"></a>Types of the closures</h3><p>é—­åŒ…é€‚ç”¨çš„åœºæ™¯ä¸€èˆ¬æ˜¯å½“åš callback functions æˆ–è€…ç”¨äº iterators ä¸­ï¼Œåœ¨å°†é—­åŒ…ä½œä¸ºå‚æ•°æ—¶æˆ‘ä»¬éœ€è¦å®šä¹‰é—­åŒ…çš„ç±»å‹ã€‚æŒ‰ç…§â€œä½ ä½¿ç”¨é—­åŒ…éœ€è¦å¹²ä»€ä¹ˆâ€å¯ä»¥å°†é—­åŒ…çš„ç±»å‹åˆ†ä¸ºä¸‰ç§ï¼Œitâ€™s matched the three ways of ğŸ‘†ğŸ»Capturing Varibales.</p>\n<h4 id=\"Fnï¼ˆReference-capturingï¼‰\"><a href=\"#Fnï¼ˆReference-capturingï¼‰\" class=\"headerlink\" title=\"Fnï¼ˆReference capturingï¼‰\"></a>Fnï¼ˆReference capturingï¼‰</h4><p>æ™®é€šé—­åŒ…ï¼Œå¯ä»¥è°ƒç”¨ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œä½†ä¸ä¿®æ”¹å˜é‡</p>\n<p><img src=\"/../images/closure/image-20250120162314741.png\" alt=\"image-20250120162314741\"></p>\n<h4 id=\"FnMutï¼ˆMutable-reference-capturingï¼‰\"><a href=\"#FnMutï¼ˆMutable-reference-capturingï¼‰\" class=\"headerlink\" title=\"FnMutï¼ˆMutable reference capturingï¼‰\"></a>FnMutï¼ˆMutable reference capturingï¼‰</h4><p>ä½ ä¼šåœ¨é—­åŒ…å†…ä¿®æ”¹ä¸€ä¸ªå®šä¹‰åœ¨é—­åŒ…å¤–éƒ¨çš„å˜é‡ï¼Œå¯ä»¥è°ƒç”¨ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œå°±ç”¨ <code>FnMut</code></p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Person</span> &#123;</span><br><span class=\"line\">  first_name: <span class=\"type\">String</span>,</span><br><span class=\"line\">  last_name: <span class=\"type\">String</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">fn</span> <span class=\"title function_\">main</span>() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> <span class=\"keyword\">mut </span><span class=\"variable\">p1</span> = Person &#123;</span><br><span class=\"line\">    first_name: <span class=\"string\">&quot;Wu&quot;</span>.<span class=\"title function_ invoke__\">to_string</span>(),</span><br><span class=\"line\">    last_name: <span class=\"string\">&quot;Marnie&quot;</span>.<span class=\"title function_ invoke__\">to_string</span>(),</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// âœ¨ å¦‚æœä½ éœ€è¦åœ¨é—­åŒ…ä¸­ä¿®æ”¹æŸä¸ªå¤–éƒ¨å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªé—­åŒ…ä¹Ÿéœ€è¦å®šä¹‰æˆ mutable</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> <span class=\"keyword\">mut </span><span class=\"variable\">change_name</span> = |new_last_name: &amp;<span class=\"type\">str</span>| p1.last_name = new_last_name.<span class=\"title function_ invoke__\">to_string</span>();</span><br><span class=\"line\">  <span class=\"title function_ invoke__\">change_name</span>(<span class=\"string\">&quot;Marnieeee&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">println!</span>(<span class=\"string\">&quot;After changed: &#123;&#125;&quot;</span>, p1.last_name);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/../images/closure/image-20250120171226001.png\" alt=\"image-20250120171226001\"></p>\n<p><img src=\"/../images/closure/image-20250120171600569.png\" alt=\"image-20250120171600569\"></p>\n<p>å¦‚ä¸Šæ˜¯æ­£ç¡®è¾“å‡ºï¼Œæˆ‘ä»¬ç°åœ¨ä¿®æ”¹ä¸‹ä¾‹å­ï¼Œæˆ‘ä»¬å†è°ƒç”¨ä¸€æ¬¡ <code>change_name</code> ä¼šå‘ç°æœ‰å¦‚ä¸‹æŠ¥é”™ï¼š</p>\n<p><img src=\"/../images/closure/image-20250120171843694.png\" alt=\"image-20250120171843694\"></p>\n<p><strong>cannot borrow <code>p1.last_name</code> as immutable because it is also borrowed</strong></p>\n<p>è¿™æ˜¯ä½¿ç”¨é—­åŒ…æ—¶éœ€è¦éµå®ˆçš„ä¸€ä¸ªè§„åˆ™ï¼Œå› ä¸ºæˆ‘ä»¬ä¸Šæ–‡è¯´è¿‡ï¼Œé—­åŒ…æœ‰æƒæ•è·å…¶ç¯å¢ƒå†…çš„å˜é‡ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å¦‚æœå‘ç°è¿˜å­˜åœ¨é—­åŒ…è°ƒç”¨ï¼Œç›¸å½“äºé—­åŒ…è¿˜å­˜åœ¨å¯¹æŸä¸ªå˜é‡çš„å€Ÿç”¨ï¼Œé‚£åœ¨æœ€åä¸€ä¸ªé—­åŒ…è°ƒç”¨ç»“æŸå‰ï¼Œè¿™ä¸ªè¢«å€Ÿç”¨çš„å˜é‡éƒ½ä¸èƒ½è¢«å…¶ä»–åœ°æ–¹å€Ÿç”¨ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥å°†é—­åŒ…çš„æ“ä½œæ”¾ä¸€èµ·ï¼Œæœ€åè¿›è¡Œè¾“å‡ºå°±éµå¾ªäº†è§„åˆ™ï¼š</p>\n<p><img src=\"/../images/closure/image-20250120172511827.png\" alt=\"image-20250120172511827\"></p>\n<p><img src=\"/../images/closure/image-20250120172524107.png\" alt=\"image-20250120172524107\"></p>\n<h4 id=\"FnOnce\"><a href=\"#FnOnce\" class=\"headerlink\" title=\"FnOnce\"></a>FnOnce</h4><p>åªèƒ½è°ƒç”¨ä¸€æ¬¡çš„é—­åŒ…ï¼Œè¿™ä¸ªç±»å‹å’Œ <code>FnMut</code> çš„åŒºåˆ«åœ¨äºè°ƒç”¨æ¬¡æ•°ï¼Œå®ƒä»¬éƒ½å¯ä»¥åœ¨å†…éƒ¨ä¿®æ”¹å˜é‡ï¼Œä½† <code>FnOnce</code> åªå…è®¸è°ƒç”¨ä¸€æ¬¡ï¼Œè¿™ä¸ªç±»å‹ä¸€èˆ¬æ˜¯ç»“åˆæˆ‘ä»¬ä¸Šé¢æåˆ°çš„ <code>move</code> è½¬ç§»æ‰€æœ‰æƒçš„åœºæ™¯ï¼Œå› ä¸ºè¢«é—­åŒ…æ•è·çš„å˜é‡çš„æ‰€æœ‰æƒï¼Œéšç€é—­åŒ…çš„æ‰§è¡Œè¢«è½¬ç§»äº†ï¼Œåœ¨é—­åŒ…è°ƒç”¨åä¸å¯è¢«è®¿é—®ï¼Œè€Œæ‰€æœ‰æƒä¹Ÿå°±åªèƒ½è¢«è½¬ç§»ä¸€æ¬¡ï¼Œæ‰€ä»¥éœ€è¦è½¬ç§»æ‰€æœ‰æƒçš„é—­åŒ…éœ€è¦å®šä¹‰ä¸º <code>FnOnce</code>ã€‚</p>\n<h2 id=\"ç»ƒä¹ \"><a href=\"#ç»ƒä¹ \" class=\"headerlink\" title=\"ç»ƒä¹ \"></a>ç»ƒä¹ </h2><img src=\"../images/closure/image-20250116222435474.png\" alt=\"image-20250116222435474\"  />\n\n\n\n<h3 id=\"new\"><a href=\"#new\" class=\"headerlink\" title=\"new\"></a>new</h3><p>åˆå§‹åŒ–æ–¹æ³•ï¼Œå°†ä¼ å…¥çš„å›è°ƒå‡½æ•°ï¼ˆå³é—­åŒ…ï¼‰å­˜å…¥ç»“æ„ä½“ä»¥åè°ƒç”¨ï¼Œå¹¶åˆå§‹åŒ–å„å­—æ®µ</p>\n<h3 id=\"get-page\"><a href=\"#get-page\" class=\"headerlink\" title=\"get_page\"></a>get_page</h3><p>æ¥æ”¶ user_id å’Œ article_idï¼Œè°ƒç”¨ is_rendered_page åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿‡</p>\n<ul>\n<li>è‹¥å­˜åœ¨ï¼šè¿”å›å­˜ä¸‹æ¥çš„ page_content</li>\n<li>è‹¥ä¸å­˜åœ¨ï¼šè°ƒç”¨ fetch_query æ¸²æŸ“ï¼Œå¹¶æ›´æ–° page_content</li>\n</ul>\n<h3 id=\"is-rendered-page\"><a href=\"#is-rendered-page\" class=\"headerlink\" title=\"is_rendered_page\"></a>is_rendered_page</h3><p>æ¯”è¾ƒå­˜ä¸‹æ¥çš„ user_id + article_id å’Œ å½“å‰è¯·æ±‚çš„æ˜¯å¦ä¸€è‡´</p>\n<h3 id=\"render-page\"><a href=\"#render-page\" class=\"headerlink\" title=\"render_page\"></a>render_page</h3><p>è°ƒç”¨åˆå§‹åŒ–çš„é—­åŒ…ï¼Œä¼ å…¥ user_id å’Œ article_idï¼Œå¾—åˆ° page_contentï¼Œå¹¶æ›´æ–°æ‰€æœ‰å­—æ®µ</p>\n<h3 id=\"å®Œæ•´ä»£ç \"><a href=\"#å®Œæ•´ä»£ç \" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">pub</span> <span class=\"keyword\">fn</span> <span class=\"title function_\">home_work</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"keyword\">mut </span><span class=\"variable\">page_cache</span> = PageCache::<span class=\"title function_ invoke__\">new</span>(|user_id: &amp;<span class=\"type\">str</span>, article_id: <span class=\"type\">u32</span>| <span class=\"punctuation\">-&gt;</span> <span class=\"type\">String</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">println!</span>(</span><br><span class=\"line\">            <span class=\"string\">&quot;Rendering page for user &#123;&#125; and article &#123;&#125;&quot;</span>,</span><br><span class=\"line\">            user_id, article_id</span><br><span class=\"line\">        );</span><br><span class=\"line\">        <span class=\"built_in\">format!</span>(</span><br><span class=\"line\">            <span class=\"string\">&quot;Rendered HTML for user &#123;&#125; and article &#123;&#125;&quot;</span>,</span><br><span class=\"line\">            user_id, article_id</span><br><span class=\"line\">        )</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">println!</span>(<span class=\"string\">&quot;&#123;&#125;&quot;</span>, page_cache.<span class=\"title function_ invoke__\">get_page</span>(<span class=\"string\">&quot;user1&quot;</span>, <span class=\"number\">42</span>));</span><br><span class=\"line\">    <span class=\"built_in\">println!</span>(<span class=\"string\">&quot;&#123;&#125;&quot;</span>, page_cache.<span class=\"title function_ invoke__\">get_page</span>(<span class=\"string\">&quot;user1&quot;</span>, <span class=\"number\">42</span>));</span><br><span class=\"line\">    <span class=\"built_in\">println!</span>(<span class=\"string\">&quot;&#123;&#125;&quot;</span>, page_cache.<span class=\"title function_ invoke__\">get_page</span>(<span class=\"string\">&quot;user2&quot;</span>, <span class=\"number\">42</span>));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// éœ€è¦ä½¿ç”¨â€œæ¯”è¾ƒâ€åŠŸèƒ½ï¼Œæ´¾ç”Ÿâ€œæ¯”è¾ƒâ€ç‰¹å¾</span></span><br><span class=\"line\"><span class=\"meta\">#[derive(PartialEq)]</span></span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">PageCache</span>&lt;T&gt;</span><br><span class=\"line\"><span class=\"keyword\">where</span></span><br><span class=\"line\">    T: <span class=\"title function_ invoke__\">Fn</span>(&amp;<span class=\"type\">str</span>, <span class=\"type\">u32</span>) <span class=\"punctuation\">-&gt;</span> <span class=\"type\">String</span>,</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    fetch_page: T,</span><br><span class=\"line\">    value: <span class=\"type\">Option</span>&lt;<span class=\"type\">String</span>&gt;,</span><br><span class=\"line\">    user_id: <span class=\"type\">Option</span>&lt;<span class=\"type\">String</span>&gt;,</span><br><span class=\"line\">    article_id: <span class=\"type\">Option</span>&lt;<span class=\"type\">u32</span>&gt;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é—­åŒ…èƒ½å¹²ä»€ä¹ˆï¼Ÿ</span></span><br><span class=\"line\"><span class=\"comment\"> * 1. as callback function</span></span><br><span class=\"line\"><span class=\"comment\"> * 2. capturing surrounding variables (important!!)</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">impl</span>&lt;T&gt; PageCache&lt;T&gt;</span><br><span class=\"line\"><span class=\"keyword\">where</span></span><br><span class=\"line\">    T: <span class=\"title function_ invoke__\">Fn</span>(&amp;<span class=\"type\">str</span>, <span class=\"type\">u32</span>) <span class=\"punctuation\">-&gt;</span> <span class=\"type\">String</span>,</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">new</span>(fetch_page: T) <span class=\"punctuation\">-&gt;</span> PageCache&lt;T&gt; &#123;</span><br><span class=\"line\">        <span class=\"comment\">// åˆå§‹åŒ–æ—¶ï¼Œå…ˆå°†ä¼ å…¥çš„é—­åŒ…å­˜ä¸‹æ¥å½“åš fetch_page æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"comment\">// é—­åŒ…æ¥æ”¶ user_id and article_id, è¿”å› page_content</span></span><br><span class=\"line\">        PageCache &#123;</span><br><span class=\"line\">            fetch_page,</span><br><span class=\"line\">            value: <span class=\"literal\">None</span>,</span><br><span class=\"line\">            article_id: <span class=\"literal\">None</span>,</span><br><span class=\"line\">            user_id: <span class=\"literal\">None</span>,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">is_rendered_page</span>(&amp;<span class=\"keyword\">self</span>, user_id: &amp;<span class=\"type\">str</span>, article_id: <span class=\"type\">u32</span>) <span class=\"punctuation\">-&gt;</span> <span class=\"type\">bool</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">self</span>.article_id.<span class=\"title function_ invoke__\">is_some_and</span>(|id| id == article_id)</span><br><span class=\"line\">            &amp;&amp; <span class=\"keyword\">self</span>.user_id.<span class=\"title function_ invoke__\">as_deref</span>().<span class=\"title function_ invoke__\">is_some_and</span>(|id| id == user_id)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">render_page</span>(&amp;<span class=\"keyword\">mut</span> <span class=\"keyword\">self</span>, user_id: &amp;<span class=\"type\">str</span>, article_id: <span class=\"type\">u32</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">self</span>.user_id = <span class=\"title function_ invoke__\">Some</span>(user_id.<span class=\"title function_ invoke__\">to_string</span>());</span><br><span class=\"line\">        <span class=\"keyword\">self</span>.article_id = <span class=\"title function_ invoke__\">Some</span>(article_id);</span><br><span class=\"line\">        <span class=\"comment\">// self.fetch_page æ˜¯ä¸€ä¸ªé—­åŒ… å³ä¸€ä¸ª function</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"variable\">page_content</span> = (<span class=\"keyword\">self</span>.fetch_page)(user_id, article_id);</span><br><span class=\"line\">        <span class=\"comment\">// println!(&quot;&#123;&#125; &#123;&#125; &#123;&#125;&quot;, user_id, article_id, page_content);</span></span><br><span class=\"line\">        <span class=\"keyword\">self</span>.value = <span class=\"title function_ invoke__\">Some</span>(page_content);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">get_page</span>(&amp;<span class=\"keyword\">mut</span> <span class=\"keyword\">self</span>, user_id: &amp;<span class=\"type\">str</span>, article_id: <span class=\"type\">u32</span>) <span class=\"punctuation\">-&gt;</span> <span class=\"type\">String</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> !<span class=\"keyword\">self</span>.<span class=\"title function_ invoke__\">is_rendered_page</span>(user_id, article_id) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">self</span>.<span class=\"title function_ invoke__\">render_page</span>(user_id, article_id);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// unwrap è·å– Option çš„ inner valueï¼Œä½†æ˜¯ä¼šè½¬ç§»æ‰€æœ‰æƒ</span></span><br><span class=\"line\">        <span class=\"comment\">// self æ˜¯ mutable çš„ï¼Œmutable ç»“æ„ä½“å†…éƒ¨çš„ fields ä¸å…è®¸è½¬ç§»æ‰€æœ‰æƒ</span></span><br><span class=\"line\">        <span class=\"comment\">// æ‰€ä»¥å…ˆ as_ref() å˜æˆæ™®é€šå€Ÿç”¨åè°ƒç”¨ unwrapï¼Œæ­¤æ—¶ å€Ÿç”¨çš„å˜é‡è°ƒç”¨ unwrap è¿”å›çš„è¿˜æ˜¯ä¸ªå€Ÿç”¨çš„å€¼</span></span><br><span class=\"line\">        <span class=\"comment\">// å› æ­¤å†ç”¨ clone() å°†å€¼å¤åˆ¶è¿”å›</span></span><br><span class=\"line\">        <span class=\"keyword\">self</span>.value.<span class=\"title function_ invoke__\">as_ref</span>().<span class=\"title function_ invoke__\">unwrap</span>().<span class=\"title function_ invoke__\">clone</span>()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"/../images/closure/image-20250121122727975.png\" alt=\"image-20250121122727975\"></p>\n","text":"What are Closures?Rust ä¸­çš„é—­åŒ…æœ¬è´¨æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå®ƒæœ‰ä¸‰ä¸ªç‰¹ç‚¹ï¼š å¯ä»¥è¢«å­˜å‚¨åœ¨å˜é‡ä¸­ å¯ä»¥å½“åšå‚æ•°ä¼ ç»™æŸä¸ªå‡½æ•° å¯ä»¥å½“åšæŸä¸ªå‡½æ•°çš„è¿”å›å€¼...","permalink":"/post/closures","photos":[],"count_time":{"symbolsCount":"7k","symbolsTime":"6 mins."},"categories":[],"tags":[{"name":"rust","slug":"rust","count":12,"path":"api/tags/rust.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#What-are-Closures\"><span class=\"toc-text\">What are Closures?</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Closure-Syntax\"><span class=\"toc-text\">Closure Syntax</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Examples\"><span class=\"toc-text\">Examples</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Simple-Closure\"><span class=\"toc-text\">Simple Closure</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#No-Parameters-one-line-body\"><span class=\"toc-text\">No Parameters, one line body</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Capturing-Variables\"><span class=\"toc-text\">Capturing Variables</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Multi-Lines\"><span class=\"toc-text\">Multi Lines</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Compared-to-standard-functions\"><span class=\"toc-text\">Compared to standard functions</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Don%E2%80%99t-have-to-sepcify-data-types-of-the-closure%E2%80%99s-arguments\"><span class=\"toc-text\">Donâ€™t have to sepcify data types of the closureâ€™s arguments</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#As-same-as-the-returning-type-also-can-be-empty-complier-will-infer-the-data-type-through-its-invoking\"><span class=\"toc-text\">As same as, the returning type also can be empty, complier will infer the data type through its invoking.</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Capturing-Variables-1\"><span class=\"toc-text\">Capturing Variables</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Examples-1\"><span class=\"toc-text\">Examples</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#Capturing-By-Reference%EF%BC%88Default\"><span class=\"toc-text\">Capturing By Referenceï¼ˆDefault)</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#Capturing-By-Mutable-Reference\"><span class=\"toc-text\">Capturing By Mutable Reference</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#Capturing-By-Value%EF%BC%88move%EF%BC%89\"><span class=\"toc-text\">Capturing By Valueï¼ˆmoveï¼‰</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Types-of-the-closures\"><span class=\"toc-text\">Types of the closures</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Fn%EF%BC%88Reference-capturing%EF%BC%89\"><span class=\"toc-text\">Fnï¼ˆReference capturingï¼‰</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#FnMut%EF%BC%88Mutable-reference-capturing%EF%BC%89\"><span class=\"toc-text\">FnMutï¼ˆMutable reference capturingï¼‰</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#FnOnce\"><span class=\"toc-text\">FnOnce</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BB%83%E4%B9%A0\"><span class=\"toc-text\">ç»ƒä¹ </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#new\"><span class=\"toc-text\">new</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#get-page\"><span class=\"toc-text\">get_page</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#is-rendered-page\"><span class=\"toc-text\">is_rendered_page</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#render-page\"><span class=\"toc-text\">render_page</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">å®Œæ•´ä»£ç </span></a></li></ol></li></ol>","author":{"name":"Marnie","slug":"blog-author","avatar":"/images/favicon.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"npm_and_pnpm","uid":"b174df949a1c3f84910009414c4b737f","slug":"npm-and-pnpm","date":"2025-01-17T16:47:09.000Z","updated":"2025-01-21T04:29:51.378Z","comments":true,"path":"api/articles/npm-and-pnpm.json","keywords":"","cover":null,"text":"TODO â€¦","permalink":"/post/npm-and-pnpm","photos":[],"count_time":{"symbolsCount":6,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"Marnie","slug":"blog-author","avatar":"/images/favicon.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"å® Marcos","uid":"764bca6314ff5edd2be26b3adc313bc1","slug":"marcos","date":"2025-01-13T14:29:24.000Z","updated":"2025-01-15T18:49:58.785Z","comments":true,"path":"api/articles/marcos.json","keywords":"","cover":[],"text":"Declarative macrosWhat is macro_rules!?macro_rules! ç”¨äºå®šä¹‰å£°æ˜å¼å®ï¼ˆdeclarative macrosï¼‰...","permalink":"/post/marcos","photos":[],"count_time":{"symbolsCount":"6.1k","symbolsTime":"6 mins."},"categories":[],"tags":[{"name":"rust","slug":"rust","count":12,"path":"api/tags/rust.json"}],"author":{"name":"Marnie","slug":"blog-author","avatar":"/images/favicon.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}