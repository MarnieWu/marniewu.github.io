{"title":"solana-token","uid":"862a15ca9d7f5ce192b03b7aed288867","slug":"solana-token","date":"2025-03-14T05:09:58.000Z","updated":"2025-03-27T11:19:34.452Z","comments":true,"path":"api/articles/solana-token.json","keywords":"","cover":[],"content":"<h2 id=\"Solana-上的代币\"><a href=\"#Solana-上的代币\" class=\"headerlink\" title=\"Solana 上的代币\"></a>Solana 上的代币</h2><p>代币是代表对各种资产所有权的数字资产。代币化使得财产权的数字化成为可能，是管理「可替代和不可替代资产」的基本组成部分。</p>\n<ul>\n<li>可替代代币代表同类型和同价值的可互换和可分割的资产（如 USDC）。</li>\n<li>不可替代代币（NFT）代表不可分割的资产的所有权（如 艺术品）。</li>\n</ul>\n<p><strong>代币就是我们平常所提到的 token。</strong></p>\n<h2 id=\"SPL（Solana-Program-Library）\"><a href=\"#SPL（Solana-Program-Library）\" class=\"headerlink\" title=\"SPL（Solana Program Library）\"></a>SPL（Solana Program Library）</h2><ul>\n<li>Token Program（代币程序）是系统程序，无需关心</li>\n<li>Mint Account（铸币账户）负责 token 的发行和销毁</li>\n<li>Token Account（代币账户）用户这边的账户</li>\n<li>Associated Token Account（关联代币账户）</li>\n</ul>\n<p><strong>关系</strong></p>\n<ul>\n<li><strong>Token Program</strong> 是系统程序，负责管理 <strong>Mint Account</strong> 和 <strong>Token Account</strong>，提供了创建和管理这些账户的<strong>指令（instructions）</strong>。</li>\n<li><strong>Mint Account</strong> 是存储了<strong>代币元数据</strong>的账户，每个 <strong>Token Account</strong> 都会关联到一个 <strong>Mint Account</strong>，表示<strong>该账户存储的是哪种代币</strong>。</li>\n<li><strong>Token Account</strong> 是存储了用户<strong>代币余额</strong>的账户，并关联到一个 <strong>Mint Account</strong>，每个用户对每种代币都有一个独立的 <strong>Token Account</strong>。</li>\n<li><strong>System Program</strong> 用于创建账户、分配账户空间并支付租金。</li>\n</ul>\n<h2 id=\"Key-Points\"><a href=\"#Key-Points\" class=\"headerlink\" title=\"Key Points\"></a>Key Points</h2><ul>\n<li>Token 代表对可替代资产和不可替代资产的所有权。</li>\n<li>Token Program 包含在网络上与可替代资产和不可替代资产交互的所有指令。</li>\n<li>Token Extension Program 是 Token Program 的一个新版本，在保持了下同样的核心功能外还包括了一些额外的功能。</li>\n<li>一个 Mint Account 代表一种唯一的代币，且存储了诸如发行量等的元数据。（可以理解为Mint说的就是某个代币。）</li>\n<li>一个 Token Account 用于追踪个体账户对某个特定代币的所有权。（某个账户持有某个Mint的相关数据。）</li>\n<li>一个 ATA 账户指的是一个用某个钱包地址和 Mint Account 地址由系统派生出的 Token Account 的地址。（一般我们在实现合约代码的时候，都是 client端创建出一个 ATA 账户，用于自动处理当前钱包和Mint Token账户之间的关联，由系统自动管理账户。基础的 Token Account 适用于手动管理账户的场景，一般我们使用不到。）</li>\n</ul>\n<h2 id=\"Mint-Account-铸币账户\"><a href=\"#Mint-Account-铸币账户\" class=\"headerlink\" title=\"Mint Account 铸币账户\"></a>Mint Account 铸币账户</h2><p>Mint Account 是每个 SPL Token 的核心账户，负责代币的定义和管理。它包含了代币的全局属性，比如总供应量和小数位数。每个代币都由一个独立的 Mint Account 来表示。</p>\n<p><strong>属性</strong></p>\n<ul>\n<li>Decimals：小数位数，定义代币的最小单位，通常是 0 到 9。</li>\n<li>Supply：供应量，代币的当前总供应量。</li>\n<li>Mint Authority：一个拥有铸造权限的公钥（<strong>Pubkey</strong>），可以铸造新的代币的账户。</li>\n<li>Freeze Authority：冻结权限，可以冻结或解冻代币账户的权限（可选）。</li>\n</ul>\n<p><strong>功能</strong></p>\n<ul>\n<li>铸造代币：当 <strong>Mint Authority</strong> 执行铸币操作时，新的代币会增加到总供应量中，并分配给指定的 Token Account。</li>\n<li>销毁代币：减少总供应量。</li>\n</ul>\n<h2 id=\"Token-Account-代币账户\"><a href=\"#Token-Account-代币账户\" class=\"headerlink\" title=\"Token Account 代币账户\"></a>Token Account 代币账户</h2><p>Token Account 是用于持有特定 SPL Token 的账户。每个用户或者合约如果想要持有某种 SPL Token，必须有一个与该 Token 对应的 Token Account。不同的代币有不同的 Token Account，账户之间无法混用。</p>\n<p><strong>属性</strong></p>\n<ul>\n<li>Amount：余额，账户中持有代币的数量。</li>\n<li>Owner：账户拥有者，控制该账户的用户或合约地址。</li>\n<li>Mint：关联的铸币账户，该账户与哪个 Mint Account 相关联。</li>\n<li>Delegate：代理账户，可以被授权管理该账户的其他账户（可选）。</li>\n<li>State：状态，账户是否处于冻结状态。</li>\n</ul>\n<p><strong>功能</strong></p>\n<ul>\n<li>接收和发送代币：Token Account 可以接受其他账户的代币，并通过转账指令将其发送给其他账户。</li>\n<li>代理权限管理：可以设置 Delegate 来授权第三方管理该账户的代币（多签）。</li>\n</ul>\n<h2 id=\"Associated-Token-Account-关联代币账户\"><a href=\"#Associated-Token-Account-关联代币账户\" class=\"headerlink\" title=\"Associated Token Account 关联代币账户\"></a>Associated Token Account 关联代币账户</h2><p>Associated Token Account（ATA）是 Token Account 的一种特殊类型，简化了 SPL Token 的账户管理。ATA 是自动与一个钱包地址绑定的账户，每个钱包地址和每个代币的 Mint（关联的铸币账户） 对应一个唯一的 Token Account，因此该账户类型极大简化了代币管理。</p>\n<p><strong>特点</strong></p>\n<ul>\n<li>唯一性：每个钱包地址只能有一个和某个 Mint 关联的 ATA。</li>\n<li>自动生成：Solana 提供了工具来自动生成 ATA，开发者不需要手动管理账户。</li>\n</ul>\n<p><strong>功能</strong></p>\n<ul>\n<li>自动处理钱包地址与代币账户之间的关联，方便用户管理不同的 SPL Token。</li>\n</ul>\n<h2 id=\"创建-Token\"><a href=\"#创建-Token\" class=\"headerlink\" title=\"创建 Token\"></a>创建 Token</h2><p>用命令创建 SPL Token</p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 申请一个新钱包地址(私钥)</span></span><br><span class=\"line\">solana-keygen new --outfile ~/.config/solana/t1.json</span><br><span class=\"line\"><span class=\"comment\">// 设置当前使用该钱包地址</span></span><br><span class=\"line\"><span class=\"comment\">// solana config set --keypair ~/.config/solana/t1.json</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建 spl token</span></span><br><span class=\"line\">spl-token create-token</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 查看 spl token 账户</span></span><br><span class=\"line\">spl-token account-info --address <span class=\"number\">5</span>S3WQTHLJDkLZZutdhkqkyQgWLcCcBEM7NeyL8BphhmW</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/../images/solana-token/image-20250314195721024.png\" alt=\"image-20250314195721024\"></p>\n<p><img src=\"/../images/solana-token/image-20250314200244137.png\" alt=\"image-20250314200244137\"></p>\n<p>每个 SPL Token 的创建会关联一个 Mint Account 作为其核心账户，上面的 <code>account-info</code> 就是该 token 关联的 Mint Account 信息。</p>\n<h2 id=\"创建-Token-Account\"><a href=\"#创建-Token-Account\" class=\"headerlink\" title=\"创建 Token Account\"></a>创建 Token Account</h2><p>创建完 SPL Token 后，我们再创建一个 Token Account 持有该 SPL Token。<code>create-account</code> 需要提供铸币账户的地址，即 token 关联的 Mint Account 地址，可以从上面的 token account-info 中拿到对应的 Mint 地址。这种由工具 <code>create-account</code> 自动生成的 Token Account 被称为 ATA。<strong>且每个钱包地址只能有一个和某个 Mint 关联的 ATA</strong>。</p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spl-token create-account <span class=\"number\">5</span>S3WQTHLJDkLZZutdhkqkyQgWLcCcBEM7NeyL8BphhmW</span><br></pre></td></tr></table></figure>\n\n<p>新创建的账户地址：</p>\n<p><img src=\"/../images/solana-token/image-20250314212830727.png\" alt=\"image-20250314212830727\"></p>\n<p>复制该账户地址可以上网站查询 Account 信息：</p>\n<p><img src=\"/../images/solana-token/image-20250314212757788.png\" alt=\"image-20250314212757788\"></p>\n<p><strong>非 ATA 账户创建</strong></p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// &lt;TOKEN_MINT_ADDRESS&gt; [ACCOUNT_KEYPAIR] 除了关联 Mint 地址，还需要提供关联钱包地址（私钥）</span></span><br><span class=\"line\">spl-token create-account <span class=\"number\">1</span>CV2MDTfGroptxCHAhEKTLzFf16cLtrHnc4SrnzeiLo /Users/wuwenqi/.config/solana/t1.json </span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"/../images/solana-token/image-20250314222815582.png\" alt=\"image-20250314222815582\"></p>\n<p>&#x2F;&#x2F; BRGy9tKRVz2p2wZaDk6UUBR54CkNrV1edvRqEXHqwdcP</p>\n<p><strong>对 Token Account 进行 token 转账</strong></p>\n<p>给 ATA 进行转账</p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// spl-token mint &lt;TOKEN_MINT_ADDRESS&gt; &lt;TOKEN_AMOUNT&gt;</span></span><br><span class=\"line\">spl-token mint <span class=\"number\">1</span>CV2MDTfGroptxCHAhEKTLzFf16cLtrHnc4SrnzeiLo <span class=\"number\">100</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>给 Token Account 进行 token 转账</p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// spl-token mint &lt;TOKEN_MINT_ADDRESS&gt; &lt;TOKEN_AMOUNT&gt; -- &lt;RECIPIENT_TOKEN_ACCOUNT_ADDRESS&gt;</span></span><br><span class=\"line\">spl-token mint <span class=\"number\">1</span>CV2MDTfGroptxCHAhEKTLzFf16cLtrHnc4SrnzeiLo <span class=\"number\">100</span> -- BMYskNiRNNiwQbw59p2kgKQADGVhtfbvF3V144jG73si</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","text":"Solana 上的代币代币是代表对各种资产所有权的数字资产。代币化使得财产权的数字化成为可能，是管理「可替代和不可替代资产」的基本组成部分。 可替代代币代表同类...","permalink":"/post/solana-token","photos":[],"count_time":{"symbolsCount":"3.6k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"solana","slug":"solana","count":7,"path":"api/tags/solana.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Solana-%E4%B8%8A%E7%9A%84%E4%BB%A3%E5%B8%81\"><span class=\"toc-text\">Solana 上的代币</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SPL%EF%BC%88Solana-Program-Library%EF%BC%89\"><span class=\"toc-text\">SPL（Solana Program Library）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Key-Points\"><span class=\"toc-text\">Key Points</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Mint-Account-%E9%93%B8%E5%B8%81%E8%B4%A6%E6%88%B7\"><span class=\"toc-text\">Mint Account 铸币账户</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Token-Account-%E4%BB%A3%E5%B8%81%E8%B4%A6%E6%88%B7\"><span class=\"toc-text\">Token Account 代币账户</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Associated-Token-Account-%E5%85%B3%E8%81%94%E4%BB%A3%E5%B8%81%E8%B4%A6%E6%88%B7\"><span class=\"toc-text\">Associated Token Account 关联代币账户</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA-Token\"><span class=\"toc-text\">创建 Token</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA-Token-Account\"><span class=\"toc-text\">创建 Token Account</span></a></li></ol>","author":{"name":"Marnie","slug":"blog-author","avatar":"/images/favicon.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"spl-token-contract","uid":"4b5a0f639775a39c3a751526b5f7688f","slug":"spl-token-contract","date":"2025-03-15T03:25:30.000Z","updated":"2025-03-28T12:44:30.236Z","comments":true,"path":"api/articles/spl-token-contract.json","keywords":"","cover":[],"text":"Solana SPL Token 合约简单实现 可参考官方实战案例：https://solana.com/developers/courses/native-o...","permalink":"/post/spl-token-contract","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"solana","slug":"solana","count":7,"path":"api/tags/solana.json"}],"author":{"name":"Marnie","slug":"blog-author","avatar":"/images/favicon.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"solana-accounts","uid":"80ed7c116b6e6514a2ce292980fb566a","slug":"solana-accounts","date":"2025-03-11T17:14:06.000Z","updated":"2025-03-26T15:39:30.265Z","comments":true,"path":"api/articles/solana-accounts.json","keywords":"","cover":[],"text":"Solana Account ModelAccount Types 数据账户，用来存储数据 系统所有账户 程序派生账户（PDA） 程序账户，用来存储可执行程序 ...","permalink":"/post/solana-accounts","photos":[],"count_time":{"symbolsCount":"4.1k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"solana","slug":"solana","count":7,"path":"api/tags/solana.json"}],"author":{"name":"Marnie","slug":"blog-author","avatar":"/images/favicon.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}